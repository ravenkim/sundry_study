!function(){"use strict";function e(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function r(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach((function(e){n(r,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}function n(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}var t="undefined"!=typeof window?window:void 0,o="undefined"!=typeof globalThis?globalThis:t,i=null==o?void 0:o.navigator;null==o||o.document,null==o||o.location,null==o||o.fetch,null!=o&&o.XMLHttpRequest&&"withCredentials"in new o.XMLHttpRequest&&o.XMLHttpRequest,null==o||o.AbortController,null==i||i.userAgent;var a,c=null!=t?t:{};!function(e){e.GZipJS="gzip-js",e.Base64="base64"}(a||(a={}));var l=["fatal","error","warning","log","info","debug"],u=Array.isArray,s=Object.prototype.toString,v=u||function(e){return"[object Array]"===s.call(e)},f=e=>"function"==typeof e,d=e=>e===Object(e)&&!v(e),p=e=>void 0===e,g=e=>"[object String]"==s.call(e),h=e=>g(e)&&0===e.trim().length,y=e=>null===e;function E(e){return!p(Event)&&_(e,Event)}function _(e,r){try{return e instanceof r}catch(e){return!1}}function x(e){return y(e)||!d(e)&&!f(e)}function O(e,r){return Object.prototype.toString.call(e)==="[object ".concat(r,"]")}function b(e){return O(e,"DOMError")}var w=/\(error: (.*)\)/,j=50,m="?";function T(e,r,n,t){var o={platform:"web:javascript",filename:e,function:"<anonymous>"===r?m:r,in_app:!0};return p(n)||(o.lineno=n),p(t)||(o.colno=t),o}var S=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,M=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,P=/\((\S*)(?::(\d+))(?::(\d+))\)/,D=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,R=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,k=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var o=n.sort(((e,r)=>e[0]-r[0])).map((e=>e[1]));return function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=[],i=e.split("\n"),a=n;a<i.length;a++){var c=i[a];if(!(c.length>1024)){var l=w.test(c)?c.replace(w,"$1"):c;if(!l.match(/\S*Error: /)){for(var u of o){var s=u(l);if(s){t.push(s);break}}if(t.length>=j)break}}}return function(e){if(!e.length)return[];var n=Array.from(e);return n.reverse(),n.slice(0,j).map((e=>r(r({},e),{},{filename:e.filename||A(n).filename,function:e.function||m})))}(t)}}(...[[30,e=>{var r=S.exec(e);if(r){var[,n,t,o]=r;return T(n,m,+t,+o)}var i=M.exec(e);if(i){if(i[2]&&0===i[2].indexOf("eval")){var a=P.exec(i[2]);a&&(i[2]=a[1],i[3]=a[2],i[4]=a[3])}var[c,l]=$(i[1]||m,i[2]);return T(l,c,i[3]?+i[3]:void 0,i[4]?+i[4]:void 0)}}],[50,e=>{var r=D.exec(e);if(r){if(r[3]&&r[3].indexOf(" > eval")>-1){var n=R.exec(r[3]);n&&(r[1]=r[1]||"eval",r[3]=n[1],r[4]=n[2],r[5]="")}var t=r[3],o=r[1]||m;return[o,t]=$(o,t),T(t,o,r[4]?+r[4]:void 0,r[5]?+r[5]:void 0)}}]]);function A(e){return e[e.length-1]||{}}var N,H,U,$=(e,r)=>{var n=-1!==e.indexOf("safari-extension"),t=-1!==e.indexOf("safari-web-extension");return n||t?[-1!==e.indexOf("@")?e.split("@")[0]:m,n?"safari-extension:".concat(r):"safari-web-extension:".concat(r)]:[e,r]};var G=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function I(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.stacktrace||e.stack||"",t=function(e){if(e&&z.test(e.message))return 1;return 0}(e);try{var o=k,i=function(e,r){var n=function(e){var r=globalThis._posthogChunkIds;if(!r)return{};var n=Object.keys(r);return U&&n.length===H?U:(H=n.length,U=n.reduce(((n,t)=>{N||(N={});var o=N[t];if(o)n[o[0]]=o[1];else for(var i=e(t),a=i.length-1;a>=0;a--){var c=i[a],l=null==c?void 0:c.filename,u=r[t];if(l&&u){n[l]=u,N[t]=[l,u];break}}return n}),{}))}(r);return e.forEach((e=>{e.filename&&(e.chunk_id=n[e.filename])})),e}(o(n,t),o);return i.slice(0,i.length-r)}catch(e){}return[]}var z=/Minified React error #\d+;/i;function L(e,r){var n,t,o=I(e),i=null===(n=null==r?void 0:r.handled)||void 0===n||n,a=null!==(t=null==r?void 0:r.synthetic)&&void 0!==t&&t;return{$exception_list:[{type:null!=r&&r.overrideExceptionType?r.overrideExceptionType:e.name,value:function(e){var r=e.message;if(r.error&&"string"==typeof r.error.message)return String(r.error.message);return String(r)}(e),stacktrace:{frames:o,type:"raw"},mechanism:{handled:i,synthetic:a}}],$exception_level:"error"}}function C(e,r){var n,t,o,i=null===(n=null==r?void 0:r.handled)||void 0===n||n,a=null===(t=null==r?void 0:r.synthetic)||void 0===t||t,c={type:null!=r&&r.overrideExceptionType?r.overrideExceptionType:null!==(o=null==r?void 0:r.defaultExceptionType)&&void 0!==o?o:"Error",value:e||(null==r?void 0:r.defaultExceptionMessage),mechanism:{handled:i,synthetic:a}};if(null!=r&&r.syntheticException){var l=I(r.syntheticException,1);l.length&&(c.stacktrace={frames:l,type:"raw"})}return{$exception_list:[c],$exception_level:"error"}}function q(e,r){var n,t,o,i=null===(n=null==r?void 0:r.handled)||void 0===n||n,a=null===(t=null==r?void 0:r.synthetic)||void 0===t||t,c=null!=r&&r.overrideExceptionType?r.overrideExceptionType:E(e)?e.constructor.name:"Error",u="Non-Error 'exception' captured with keys: ".concat(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,n=Object.keys(e);if(n.sort(),!n.length)return"[object has no keys]";for(var t=n.length;t>0;t--){var o=n.slice(0,t).join(", ");if(!(o.length>r))return t===n.length||o.length<=r?o:"".concat(o.slice(0,r),"...")}return""}(e)),s={type:c,value:u,mechanism:{handled:i,synthetic:a}};if(null!=r&&r.syntheticException){var v=I(null==r?void 0:r.syntheticException,1);v.length&&(s.stacktrace={frames:v,type:"raw"})}return{$exception_list:[s],$exception_level:(o=e.level,g(o)&&!h(o)&&l.indexOf(o)>=0?e.level:"error")}}function W(e,n){var{error:t,event:o}=e,i={$exception_list:[]},a=t||o;if(b(a)||function(e){return O(e,"DOMException")}(a)){var c=a;if(function(e){return"stack"in e}(a))i=L(a,n);else{var l=c.name||(b(c)?"DOMError":"DOMException"),u=c.message?"".concat(l,": ").concat(c.message):l,s=b(c)?"DOMError":"DOMException";i=C(u,r(r({},n),{},{overrideExceptionType:s,defaultExceptionMessage:u}))}return"code"in c&&(i.$exception_DOMException_code="".concat(c.code)),i}if(function(e){return O(e,"ErrorEvent")}(a)&&a.error)return L(a.error,n);if(function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return _(e,Error)}}(a))return L(a,n);if(function(e){return O(e,"Object")}(a)||E(a))return q(a,n);if(p(t)&&g(o)){var v="Error",f=o,d=o.match(G);return d&&(v=d[1],f=d[2]),C(f,r(r({},n),{},{overrideExceptionType:v,defaultExceptionMessage:f}))}return C(a,n)}function X(e){var[r]=e,n=function(e){if(x(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e}(r);return x(n)?C("Non-Error promise rejection captured with value: ".concat(String(n)),{handled:!1,synthetic:!1,overrideExceptionType:"UnhandledRejection"}):W({event:n},{handled:!1,overrideExceptionType:"UnhandledRejection",defaultExceptionMessage:String(n)})}var B=e=>{var r={_log:function(r){if(t&&c.POSTHOG_DEBUG&&!p(t.console)&&t.console){for(var n=("__rrweb_original__"in t.console[r]?t.console[r].__rrweb_original__:t.console[r]),o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];n(e,...i)}},info:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];r._log("log",...n)},warn:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];r._log("warn",...n)},error:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];r._log("error",...n)},critical:function(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];console.error(e,...n)},uninitializedWarning:e=>{r.error("You must initialize PostHog before calling ".concat(e))},createLogger:r=>B("".concat(e," ").concat(r))};return r},F=(0,B("[PostHog.js]").createLogger)("[ExceptionAutocapture]"),J={wrapOnError:e=>{var r=t;r||F.info("window not available, cannot wrap onerror");var n=r.onerror;return r.onerror=function(){for(var r,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];var a=W({event:o[0],error:o[4]});return e(a),null!==(r=null==n?void 0:n(...o))&&void 0!==r&&r},r.onerror.__POSTHOG_INSTRUMENTED__=!0,()=>{var e;null===(e=r.onerror)||void 0===e||delete e.__POSTHOG_INSTRUMENTED__,r.onerror=n}},wrapUnhandledRejection:e=>{var r=t;r||F.info("window not available, cannot wrap onUnhandledRejection");var n=r.onunhandledrejection;return r.onunhandledrejection=function(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var c=X(i);return e(c),null!==(t=null==n?void 0:n.apply(r,i))&&void 0!==t&&t},r.onunhandledrejection.__POSTHOG_INSTRUMENTED__=!0,()=>{var e;null===(e=r.onunhandledrejection)||void 0===e||delete e.__POSTHOG_INSTRUMENTED__,r.onunhandledrejection=n}},wrapConsoleError:e=>{var r=console;r||F.info("console not available, cannot wrap console.error");var n=r.error;return r.error=function(){for(var r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];var i=t.join(" "),a=t.find((e=>e instanceof Error)),c=a?W({event:i,error:a}):W({event:i},{syntheticException:new Error("PostHog syntheticException")});return e(c),null==n?void 0:n(...t)},r.error.__POSTHOG_INSTRUMENTED__=!0,()=>{var e;null===(e=r.error)||void 0===e||delete e.__POSTHOG_INSTRUMENTED__,r.error=n}}};c.__PosthogExtensions__=c.__PosthogExtensions__||{},c.__PosthogExtensions__.errorWrappingFunctions=J,c.posthogErrorWrappingFunctions=J}();
//# sourceMappingURL=exception-autocapture.js.map
